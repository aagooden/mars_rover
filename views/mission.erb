<style>
  .mars_pic {
    background-image: url("/mars_surface.png");
    /* background-repeat: no-repeat; */
    background-size: cover;
  }
</style>


  <!-- <img src="/mars_surface.png" id="mars_pic"> -->
  <!--<img class="resize" src="/some_picture_.jpg"> -->
  <h3><%=session[:rover_routes]%></h3>
  <%=rover1_route = session[:rover_routes]["rover1"]%>
  <%=rover1_route = session[:rover_routes]["rover2"]%>



  <%rover1_route = session[:rover_routes]["rover1"]%>
  <%rover2_route = session[:rover_routes]["rover2"]%>

  <h2>The starting position for Rover #1 is <%=rover1_route[0]%></h2>
  <h3>The path Rover #1 took is <%=rover1_route%></h3>
  <h2>The ending position for Rover #1 is <%=rover1_route.last%></h2><br><br>



  <h2>The starting position for Rover #2 is <%=rover2_route[0]%></h2>
  <h3>The path Rover #2 took is <%=rover2_route%></h3>
  <h2>The ending position for Rover #2 is <%=rover2_route.last%></h2>

  <canvas  id="myCanvas" class="mars_pic" width="500vw" height="500vh" style="border:1px solid #d3d3d3;"</canvas>

<script>

var grid_string = '<%= session[:grid_size].to_json %>';
var grid_size = JSON.parse(grid_string);

var rover1_string = '<%= rover1_route.to_json %>';
var rover1_array = JSON.parse(rover1_string);

var rover2_string = '<%= rover2_route.to_json %>';
var rover2_array = JSON.parse(rover2_string);


  var c = document.getElementById("myCanvas");
  var ctx = c.getContext("2d");
  ctx.lineWidth=2;
  ctx.strokeStyle="green";
  ctx.strokeRect(2,2,498,498);
  // var img = new Image();
  // var img = document.getElementById('mars_pic');
  // img.src = source;
  // img.src = '/mars_surface.png';
  // ctx.drawImage(img, 0, 0);


  function drawGrid(grid_size,ctx) {
    var c = document.getElementById("myCanvas");
    var ctx = c.getContext("2d");
    var row_width = 500 / grid_size[0];
    var column_width = 500 / grid_size[0];

    var i;
    for (i = 0; i < grid_size[0]; i++) {
    ctx.moveTo(row_width * i, 0);
    ctx.lineTo(row_width * i, 499);
    ctx.stroke();
    }

    var i;
    for (i = 0; i < grid_size[0]; i++) {
      ctx.moveTo(0, column_width * i);
      ctx.lineTo(499, column_width * i);

      ctx.stroke();
    }
  }

  function drawRover1(rover1_route, ctx){
    var c = document.getElementById("myCanvas");
    var ctx = c.getContext("2d");
    var x_multiplyer = 500 / grid_size[0];
    var y_multiplyer = 500 / grid_size[1];

    rover1_array.forEach(function(position) {

      var img = new Image();
        img.src = '/rover.png';
        img.onload = function() {
          ctx.drawImage(img, position[0]*x_multiplyer, position[1]*y_multiplyer , 50, 50);
        };
  });
}

  drawGrid(grid_size);
  drawRover1(rover1_array);

</script>
